<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valentine Nadila üíó</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --p1:#ffd1e8;
      --p2:#ff7eb9;
      --p3:#ff4f9a;

      --ink:#2b0a1b;
      --muted:#7a1f44;

      --accent:#ff3b7a;
      --accent2:#ff5aa6;
      --good:#34c759;
      --bad:#ff4d4d;

      --l7Text:#ff3b7a;
      --l7Card: rgba(255,255,255,.92);
      --l7Border: rgba(255,255,255,.86);
    }

    *{ box-sizing:border-box; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; }
    html, body{ height:100%; }
    body{
      margin:0;
      min-height:100vh;
      overflow:hidden; /* background tetap */
      background: linear-gradient(180deg, var(--p1), var(--p2), var(--p3));
    }

    /* Petals */
    .petal{
      position:fixed; width:14px; height:10px;
      background: rgba(255,255,255,.65);
      border-radius: 999px;
      opacity:.85;
      animation: fall 8.5s linear infinite;
      z-index:0; pointer-events:none;
    }
    @keyframes fall{
      0%{ transform: translateY(-12vh) translateX(0) rotate(0deg); opacity:.9; }
      100%{ transform: translateY(112vh) translateX(55px) rotate(180deg); opacity:0; }
    }

    /* Layers */
    .layer{
      position:fixed; inset:0;
      display:grid; place-items:center;
      padding:24px;
      opacity:0; pointer-events:none;
      transform: translateY(10px);
      transition: opacity .28s ease, transform .28s ease;
      z-index:1;
    }
    .layer.active{ opacity:1; pointer-events:auto; transform: translateY(0); }

    /* ‚úÖ Scroll fix (HP) */
    .layer.scrollable{
      place-items: start center;
      align-content: start;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
      padding-top: 14px;
      padding-bottom: 20px;
    }
    .layer.scrollable .card{ margin: 10px auto; }

    /* Base Card */
    .card{
      width:min(440px, 96%);
      background: rgba(255,255,255,.92);
      border-radius: 34px;
      padding: 26px 22px 70px;
      box-shadow: 0 14px 40px rgba(0,0,0,.16);
      border: 2px solid rgba(255,255,255,.85);
      position:relative;
      text-align:center;
      overflow:hidden;
    }
    .card > *:not(.wave){ position:relative; z-index:1; }

    .wave{
      position:absolute; left:0; right:0; bottom:0;
      height:110px; pointer-events:none; z-index:0;
    }
    .wave svg{ width:100%; height:100%; display:block; }

    button{
      border:none; cursor:pointer; user-select:none;
      font-weight:900;
      border-radius: 999px;
      padding: 14px 18px;
      color:#fff;
      background: var(--accent);
      transition: transform .08s ease, opacity .2s ease;
      font-family:"Baloo 2", system-ui;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .ghostBtn{
      background: rgba(255,59,122,.12);
      color: rgba(43,10,27,.92);
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 900;
    }
    .primaryBtn{
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 12px 26px rgba(255,59,122,.18);
    }

    /* Layer 1 */
    .btnRow{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:center; align-items:center;
      margin-top: 12px; position:relative;
      min-height: 58px; padding: 12px;
      border-radius: 18px;
      background: rgba(255,59,122,.08);
      border: 1px solid rgba(122,31,68,.18);
    }
    .yesBtn{ background: var(--good); padding: 12px 18px; border-radius: 14px; }
    .noBtn{ background: var(--bad); padding: 12px 18px; border-radius: 14px; position:relative; }
    .miniText{ margin-left:auto; color: rgba(43,10,27,.62); font-size: 13px; font-weight:900; font-family:"Baloo 2", system-ui; }

    .imgWrap{
      width:150px; margin: 0 auto 12px;
      display:flex; justify-content:center; align-items:center;
    }
    .imgWrap img{ width:100%; max-height:180px; object-fit:contain; display:block; }

    .title{ font-family:"Baloo 2", system-ui; font-weight:1000; color: var(--accent); font-size: 26px; margin: 6px 0 6px; }
    .subtitle{ font-family:"Baloo 2", system-ui; color: var(--muted); font-style:italic; line-height:1.4; margin: 0 0 16px; font-size: 15px; font-weight: 800; }
    .smallHint{ font-family:"Baloo 2", system-ui; margin-top: 10px; color: rgba(43,10,27,.58); font-size: 13px; font-weight: 900; }

    /* Layer 2 */
    .loadingTitle{ font-family:"Baloo 2", system-ui; font-size: 26px; font-weight: 1000; color: rgba(43,10,27,.72); margin: 2px 0 6px; }
    .loadingSub{ font-family:"Baloo 2", system-ui; color: rgba(43,10,27,.52); font-style: italic; margin: 0 0 18px; font-weight: 800; }
    .topCurve{
      margin-top:14px; border-radius: 26px; padding: 18px 14px 18px;
      background: linear-gradient(180deg, rgba(255,59,122,.10), rgba(255,59,122,.02));
      border: 1px solid rgba(255,59,122,.16);
    }
    .progressOuter{
      height: 16px; border-radius: 999px;
      background: rgba(255,59,122,.16);
      border: 2px solid rgba(255,59,122,.30);
      overflow:hidden; width: 92%; margin: 0 auto 14px;
    }
    .progressInner{
      height: 100%; width: 35%;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border-radius: 999px;
      animation: progressMove 1.15s ease-in-out infinite;
    }
    @keyframes progressMove{ 0%{ transform: translateX(-70%);} 50%{ transform: translateX(110%);} 100%{ transform: translateX(-70%);} }
    .dots3{ display:flex; gap:10px; justify-content:center; margin-top: 6px; }
    .dot3{ width:10px; height:10px; border-radius:999px; background: rgba(255,59,122,.62); animation: dotPulse .9s infinite; }
    .dot3:nth-child(2){ animation-delay:.15s; } .dot3:nth-child(3){ animation-delay:.30s; }
    @keyframes dotPulse{ 0%,100%{ transform: translateY(0); opacity:.55; } 50%{ transform: translateY(-4px); opacity:1; } }

    /* Layer 3 */
    .layer3Card *{ font-family: "Baloo 2", system-ui; }
    .layer3Mini{ color: rgba(43,10,27,.55); font-style: italic; font-weight: 800; margin: 6px 0 10px; }
    .layer3Title{ font-size: 38px; font-weight: 900; color: var(--accent); margin: 0 0 14px; line-height:1.0; }
    .layer3Quote{
      background: rgba(255,79,154,.92); color:#fff;
      border-radius: 22px; padding: 16px 16px;
      font-size: 18px; font-style: italic; line-height:1.35;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.16);
      margin-bottom: 12px;
    }
    .layer3Ready{ margin-top: 10px; color: rgba(43,10,27,.55); font-weight: 800; font-size: 18px; }
    .layer3Btn{
      margin-top: 16px; width: 92%;
      font-size: 20px; padding: 16px 18px; border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      box-shadow: 0 12px 26px rgba(255,59,122,.22);
    }

    /* ===== Layer 4 wide ===== */
    .wideCard{ width:min(1040px, 96%); text-align:left; padding-bottom: 78px; }
    /* ‚úÖ biar gak kepotong di HP (scrollable) */
    #layer4.scrollable .wideCard{ max-height: calc(100vh - 28px); }

    .wideHead{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap:12px; flex-wrap:wrap; margin-bottom: 12px;
    }
    .wideTitle{
      font-family:"Baloo 2", system-ui;
      margin:0;
      font-size: 32px;
      font-weight: 900;
      color: var(--accent);
      text-shadow: 0 2px 0 rgba(255,255,255,.7);
      display:flex; align-items:center; gap:8px;
    }
    .twoCol{
      display:grid; grid-template-columns: 1fr 1fr;
      gap: 16px; align-items: stretch;
    }
    @media (max-width: 920px){ .twoCol{ grid-template-columns: 1fr; } }

    .panel{
      border-radius: 22px;
      background: rgba(255,59,122,.06);
      border: 1px solid rgba(255,59,122,.14);
      padding: 14px;
      height:100%;
    }
    .panelLeft{ display:flex; flex-direction:column; height:100%; gap:10px; }

    .frame{
      width:100%;
      flex: 0 0 auto;
      height: clamp(340px, 46vh, 520px);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(255,59,122,.18);
      position:relative;
      display:flex; align-items:center; justify-content:center;
      padding: 10px;
    }
    @media (max-width: 520px){
      .frame{ height: min(44vh, 420px); }
    }
    .frame img{
      width:100%; height:100%;
      object-fit: contain;
      object-position:center;
      display:block;
      border-radius: 14px;
      background: rgba(255,255,255,.35);
    }

    .badge{
      position:absolute; left:10px; top:10px;
      background: rgba(0,0,0,.35); color:#fff;
      padding: 6px 10px; border-radius: 999px;
      font-size: 12px; font-weight: 900;
      backdrop-filter: blur(6px);
      font-family:"Baloo 2", system-ui;
    }

    .dots{ display:flex; gap:8px; justify-content:center; margin-top: 2px; }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: rgba(255,59,122,.18);
      border: 1px solid rgba(255,59,122,.22);
      cursor:pointer;
      transition: transform .12s ease, background .12s ease;
    }
    .dot.active{ background: rgba(255,59,122,.90); transform: scale(1.15); }

    .navRow{
      display:flex; gap:10px; flex-wrap:wrap;
      justify-content:space-between; align-items:center;
      margin-top: 6px;
      font-family:"Baloo 2", system-ui;
    }

    .letterHeader{
      display:flex; align-items:center; justify-content:center;
      gap:10px; margin: 2px 0 10px;
    }
    .letterHeader img{ width:38px; height:38px; object-fit:contain; display:block; }
    .letterHeaderTitle{
      font-family:"Baloo 2", system-ui;
      margin:0;
      font-size: 22px;
      font-weight: 900;
      color: rgba(43,10,27,.92);
      text-align:center;
    }

    .letterBox{
      border-radius: 18px;
      padding: 8px 14px 14px;
      background: rgba(255,255,255,.65);
      border: 1px dashed rgba(255,59,122,.30);
      min-height: 320px;
      white-space:pre-wrap;
      line-height:1.35;
      color: rgba(43,10,27,.92);
      font-weight: 800;
      font-family:"Baloo 2", system-ui;
      font-size: 15px;
    }
    @media (max-width: 520px){
      .letterBox{ min-height: 320px; }
    }

    .cursor{
      display:inline-block; width:10px; margin-left:2px;
      transform: translateY(2px);
      color: var(--accent);
      animation: blink .9s steps(2,end) infinite;
      font-weight: 1100;
    }
    @keyframes blink{ 0%,50%{ opacity:1;} 51%,100%{ opacity:0;} }

    /* ===== Layer 5 Songs ===== */
    .sectionTitle{
      font-family:"Baloo 2", system-ui;
      font-size: 28px;
      font-weight: 900;
      color: var(--accent);
      margin: 0 0 12px;
      text-align:center;
      text-shadow: 0 2px 0 rgba(255,255,255,.7);
    }
    .songList{ display:grid; gap: 14px; margin-top: 10px; }

    .songCard{
      border-radius: 26px;
      padding: 14px;
      background: rgba(255,59,122,.06);
      border: 1px solid rgba(255,59,122,.14);
      display:flex;
      gap: 12px;
      align-items:center;
    }
    .songArt{
      width: 96px; height: 76px;
      border-radius: 16px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,59,122,.18);
      display:flex; align-items:center; justify-content:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .songArt img{ width:100%; height:100%; object-fit:contain; display:block; padding:10px; }

    .songMeta{ flex:1; min-width: 120px; }
    .songTitle{
      font-family:"Baloo 2", system-ui;
      font-size: 16px;
      font-weight: 900;
      margin: 0;
      color: rgba(43,10,27,.92);
      line-height:1.1;
    }
    .songArtist{
      margin: 4px 0 0;
      font-size: 13px;
      color: rgba(43,10,27,.62);
      font-weight: 900;
      font-style: italic;
      font-family:"Baloo 2", system-ui;
    }
    .songActions{
      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:stretch;
    }
    .miniBtn{
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 1000;
      background: rgba(255,59,122,.12);
      color: rgba(43,10,27,.92);
      white-space:nowrap;
      font-family:"Baloo 2", system-ui;
    }

    /* ===== Layer 6 ===== */
    /* ‚úÖ layer 6 dibuat scroll & icon ga kepotong */
    #layer6.scrollable .card{ max-height: calc(100vh - 28px); }

    .whyWrap{ display:grid; gap: 14px; margin-top: 10px; padding-top: 18px; }

    /* ‚úÖ scroll khusus list pop-up */
    .whyScroll{
      max-height: 62vh;
      overflow-y:auto;
      -webkit-overflow-scrolling: touch;
      padding-top: 10px;
      padding-right: 4px;
    }
    @media (max-width: 520px){
      .whyScroll{ max-height: 56vh; }
      .whyWrap{ padding-top: 18px; }
    }

    .whyCard{
      position:relative;
      border-radius: 26px;
      padding: 18px 16px 16px;
      background: rgba(255,255,255,.68);
      border: 2px solid rgba(255,255,255,.85);
      box-shadow: 0 10px 28px rgba(0,0,0,.10);
      overflow: visible; /* ‚úÖ biar icon ga ke-cut */
    }
    .whyIcon{
      width:56px; height:56px;
      border-radius: 999px;
      background: linear-gradient(180deg, rgba(255,59,122,.35), rgba(255,59,122,.18));
      border: 2px solid rgba(255,255,255,.9);
      display:grid; place-items:center;
      font-size: 26px;
      position:absolute;
      left:50%; top:-28px;
      transform: translateX(-50%);
      box-shadow: 0 10px 20px rgba(0,0,0,.12);
      z-index: 2;
    }
    .whyTitle{
      font-family:"Baloo 2", system-ui;
      text-align:center;
      margin: 22px 0 6px;
      font-size: 22px;
      font-weight: 900;
      color: rgba(43,10,27,.92);
    }
    .whyQuote{
      text-align:center;
      margin: 0;
      font-style: italic;
      font-weight: 900;
      color: rgba(43,10,27,.55);
      line-height: 1.4;
      font-family:"Baloo 2", system-ui;
    }
    .pop{ animation: pop .22s ease; }
    @keyframes pop{ from{ transform: scale(.98); } to{ transform: scale(1); } }

    /* ===== Layer 7 ===== */
    .endWrap{
      width:min(520px, 96%);
      display:grid;
      gap: 14px;
      justify-items:center;
    }
    .endTitleTop{
      font-family:"Baloo 2", system-ui;
      font-size: 36px;
      font-weight: 900;
      color: var(--l7Text);
      text-align:center;
      text-shadow: 0 2px 0 rgba(255,255,255,.7);
      line-height:1.1;
      margin: 0;
    }
    .endCard{
      width:100%;
      background: var(--l7Card);
      border: 3px solid var(--l7Border);
      border-radius: 34px;
      box-shadow: 0 14px 40px rgba(0,0,0,.18);
      padding: 26px 22px 76px;
      position:relative;
      overflow:hidden;
      text-align:center;
    }
    .endInner{
      margin: 10px auto 0;
      width: 92%;
      border-radius: 26px;
      background: rgba(255,59,122,.06);
      border: 2px solid rgba(255,59,122,.16);
      padding: 22px 16px;
    }
    .endHeartBig{ font-size: 44px; margin: 2px 0 10px; }
    .endMain{
      font-family:"Baloo 2", system-ui;
      font-size: 44px;
      font-weight: 900;
      color: var(--l7Text);
      margin: 0;
      line-height: 1.0;
    }
    .endSub{
      font-family:"Baloo 2", system-ui;
      font-size: 18px;
      font-weight: 800;
      color: rgba(255,59,122,.75);
      margin: 6px 0 16px;
      font-style: italic;
    }
    .heartsRow{
      display:flex;
      justify-content:center;
      gap: 8px;
      margin: 10px 0 18px;
      flex-wrap:wrap;
      font-size: 22px;
      color: var(--l7Text);
      font-family:"Baloo 2", system-ui;
    }
    .fromLine{
      font-family:"Baloo 2", system-ui;
      font-size: 22px;
      font-weight: 900;
      color: rgba(43,10,27,.78);
      margin: 0;
    }
    .dateLine{
      font-family:"Baloo 2", system-ui;
      font-size: 15px;
      font-weight: 800;
      color: rgba(43,10,27,.48);
      margin: 6px 0 0;
    }
    .endBtn{
      margin-top: 18px;
      width: min(320px, 92%);
      padding: 14px 18px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      color: var(--l7Text);
      border: 3px solid rgba(255,59,122,.55);
      font-weight: 900;
      font-family:"Baloo 2", system-ui;
      box-shadow: 0 12px 28px rgba(255,59,122,.14);
    }

    .waveEnd{
      position:absolute; left:0; right:0; bottom:0;
      height:120px; pointer-events:none;
    }

    /* Hearts float */
    .heart{
      position:fixed; left:0; top:0;
      font-size:18px; opacity:0;
      pointer-events:none;
      animation: floatUp linear forwards;
      z-index:2;
      font-family:"Baloo 2", system-ui;
    }
    @keyframes floatUp{
      0%{ transform: translate(var(--x), 0) scale(var(--s)); opacity:0; }
      10%{ opacity:.88; }
      90%{ opacity:.88; }
      100%{ transform: translate(var(--x2), -120vh) scale(calc(var(--s) * 1.1)); opacity:0; }
    }
  </style>
</head>

<body>
  <div class="petal" style="left:10%; animation-delay:0s"></div>
  <div class="petal" style="left:28%; animation-delay:1.1s"></div>
  <div class="petal" style="left:52%; animation-delay:2.2s"></div>
  <div class="petal" style="left:74%; animation-delay:.6s"></div>
  <div class="petal" style="left:88%; animation-delay:1.7s"></div>

  <!-- LAYER 1 -->
  <section id="layer1" class="layer active">
    <div class="card">
      <div class="imgWrap"><img src="cat.gif" alt="cute cat"></div>
      <div class="title">Nadila sayangkuu ü•∞üíñ</div>
      <div class="subtitle">Something special just for you‚Ä¶ üíû<br> Klik tombol di bawah yaa ‚ú®ü´∂</div>

      <div class="btnRow" id="btnArea">
        <button id="yesBtn" class="yesBtn">Yes üíñ</button>
        <button id="noBtn" class="noBtn">No üòè</button>
        <div class="miniText">jangan coba pencet No ya üòè</div>
      </div>

      <div class="smallHint">Klik <b>Yes</b> ya sayangkuu üíòüíû</div>

      <audio id="bgm" src="music.mp3" loop preload="auto"></audio>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- LAYER 2 -->
  <section id="layer2" class="layer">
    <div class="card">
      <div class="imgWrap"><img src="cat.gif" alt="cat"></div>
      <div class="loadingTitle">A Valentine Moment</div>
      <div class="loadingSub">is being prepared for you‚Ä¶</div>

      <div class="topCurve">
        <div class="progressOuter"><div class="progressInner"></div></div>
        <div class="dots3">
          <div class="dot3"></div><div class="dot3"></div><div class="dot3"></div>
        </div>
      </div>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- LAYER 3 -->
  <section id="layer3" class="layer">
    <div class="card layer3Card">
      <div class="layer3Mini">Hi, I have something special for you</div>
      <div class="layer3Title">Will You Be My<br>Valentine?</div>

      <div class="layer3Quote">
        ‚ÄúA little reminder of how much more meaningful my life is with you in it.‚Äù
      </div>

      <div class="layer3Ready">Click below when you‚Äôre ready‚ú®</div>
      <button id="openBtn" class="layer3Btn">Open This!üíô</button>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- ‚úÖ LAYER 4 (scrollable) -->
  <section id="layer4" class="layer scrollable">
    <div class="card wideCard">
      <div class="wideHead">
        <h2 class="wideTitle">Kenangan & Surat <span aria-hidden="true">üíó</span></h2>
        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <button id="musicBtn" class="ghostBtn">üîá Musik</button>
          <button id="toSongsBtn" class="primaryBtn">Continue ‚ûú üéµ</button>
        </div>
      </div>

      <div class="twoCol">
        <div class="panel panelLeft">
          <div class="frame">
            <span class="badge" id="badge">Foto 1 / 5</span>
            <img id="slideImg" src="foto1.jpg" alt="slide">
          </div>

          <div class="dots" id="dots"></div>

          <div class="navRow">
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button id="prevBtn" class="ghostBtn">‚¨ÖÔ∏è Prev</button>
              <button id="nextBtn" class="ghostBtn">Next ‚û°Ô∏è</button>
            </div>
            <div style="color:rgba(43,10,27,.62); font-weight:900; font-size:13px;">
              (HP bisa swipe kiri/kanan)
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="letterHeader">
            <img src="love_left.gif" alt="love left">
            <h3 class="letterHeaderTitle">Hai Nadila sayangku</h3>
            <img src="love_right.gif" alt="love right">
          </div>

          <div class="letterBox">
            <span id="typedText"></span><span id="cursor" class="cursor">|</span>
          </div>

          <div class="navRow">
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button id="replayBtn" class="ghostBtn">Ulangi ketik ‚úçÔ∏è</button>
              <button id="speedBtn" class="ghostBtn">Speed: Normal</button>
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button id="finishBtn" class="ghostBtn">Tampilkan semua ‚ö°</button>
            </div>
          </div>
        </div>
      </div>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- LAYER 5 -->
  <section id="layer5" class="layer">
    <div class="card">
      <div class="sectionTitle">Songs that remind me of our memories üé∂</div>

      <div class="songList">
        <div class="songCard">
          <div class="songArt"><img src="tape1.gif" alt="tape gif"></div>
          <div class="songMeta">
            <p class="songTitle">Kaktus</p>
            <p class="songArtist">Suara Kayu</p>
          </div>
          <div class="songActions">
            <button class="miniBtn" id="song1Play">‚ñ∂Ô∏è Play</button>
            <button class="miniBtn" id="song1Stop">‚èπ Stop</button>
          </div>
        </div>

        <div class="songCard">
          <div class="songArt"><img src="tape2.gif" alt="tape gif"></div>
          <div class="songMeta">
            <p class="songTitle">Kita Usahakan Rumah Itu</p>
            <p class="songArtist">Sal Priadi</p>
          </div>
          <div class="songActions">
            <button class="miniBtn" id="song2Play">‚ñ∂Ô∏è Play</button>
            <button class="miniBtn" id="song2Stop">‚èπ Stop</button>
          </div>
        </div>
      </div>

      <div class="navRow" style="margin-top:16px;">
        <button id="songsBack" class="ghostBtn">‚¨ÖÔ∏è Back</button>
        <button id="toWhyBtn" class="primaryBtn">Continue ‚ûú üíå</button>
      </div>

      <audio id="song1" src="song1.mp3" preload="auto"></audio>
      <audio id="song2" src="song2.mp3" preload="auto"></audio>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- ‚úÖ LAYER 6 (scrollable + scroll khusus list) -->
  <section id="layer6" class="layer scrollable">
    <div class="card">
      <div class="sectionTitle">WHY YOU MATTER üíó</div>
      <div style="text-align:center; color:rgba(43,10,27,.58); font-weight:900; font-style:italic; margin-top:-8px; font-family:'Baloo 2',system-ui;">
        A glimpse of what makes you amazing
      </div>

      <div class="whyScroll">
        <div class="whyWrap">
          <div class="whyCard" data-pop>
            <div class="whyIcon">üíñ</div>
            <div class="whyTitle">Pure Heart</div>
            <p class="whyQuote">‚ÄúKamu perhatian dengan cara yang tulus dan bikin aku ngerasa tenang.‚Äù</p>
          </div>

          <div class="whyCard" data-pop>
            <div class="whyIcon">üåä</div>
            <div class="whyTitle">Calming Presence</div>
            <p class="whyQuote">‚ÄúBareng kamu rasanya damai‚Ä¶ kek semua jadi lebih nyaman.‚Äù</p>
          </div>

          <div class="whyCard" data-pop>
            <div class="whyIcon">‚ú®</div>
            <div class="whyTitle">Your Shine</div>
            <p class="whyQuote">‚ÄúCara kamu senyum, cara kamu cerita‚Ä¶ itu bikin aku merasa penting.‚Äù</p>
          </div>
        </div>
      </div>

      <div class="navRow" style="margin-top:16px;">
        <button id="whyBack" class="ghostBtn">‚¨ÖÔ∏è Back</button>
        <button id="toEndBtn" class="primaryBtn">Continue ‚ûú üéÄ</button>
      </div>

      <div class="wave" aria-hidden="true">
        <svg viewBox="0 0 1440 220" preserveAspectRatio="none">
          <path d="M0,110 C240,170 420,60 720,120 C1020,180 1200,90 1440,120 L1440,220 L0,220 Z"
                fill="rgba(255,126,185,.32)"></path>
          <path d="M0,130 C260,190 420,80 720,140 C1020,200 1200,110 1440,140 L1440,220 L0,220 Z"
                fill="rgba(255,79,154,.18)"></path>
        </svg>
      </div>
    </div>
  </section>

  <!-- LAYER 7 -->
  <section id="layer7" class="layer">
    <div class="endWrap">
      <h1 class="endTitleTop">Happy Valentine‚Äôs Day<br>Darling</h1>

      <div class="endCard">
        <div class="endInner">
          <div class="endHeartBig">üíó</div>
          <h2 class="endMain">Sent with Love</h2>
          <div class="endSub">Only For You</div>

          <div class="heartsRow">üíó üíó üíó üíó üíó üíó üíó</div>

          <p class="fromLine">From Your Hero (Batman Nacaa ü¶á)</p>
          <p class="dateLine" id="endDate">Wednesday, February 11, 2026</p>

          <button id="seeAgainBtn" class="endBtn">see again‚ú®</button>
        </div>

        <div class="waveEnd" aria-hidden="true">
          <svg viewBox="0 0 1440 240" preserveAspectRatio="none" style="width:100%;height:100%;display:block;">
            <path d="M0,130 C260,200 420,80 720,150 C1020,220 1200,120 1440,150 L1440,240 L0,240 Z"
                  fill="rgba(255,126,185,.32)"></path>
            <path d="M0,150 C240,210 420,105 720,170 C1020,235 1200,145 1440,170 L1440,240 L0,240 Z"
                  fill="rgba(255,79,154,.18)"></path>
          </svg>
        </div>
      </div>
    </div>
  </section>

<script>
  const layers = {
    1: document.getElementById("layer1"),
    2: document.getElementById("layer2"),
    3: document.getElementById("layer3"),
    4: document.getElementById("layer4"),
    5: document.getElementById("layer5"),
    6: document.getElementById("layer6"),
    7: document.getElementById("layer7"),
  };
  function showLayer(n){
    Object.values(layers).forEach(l => l.classList.remove("active"));
    layers[n].classList.add("active");
    window.scrollTo({ top: 0, behavior: "instant" });
  }

  const photos = ["foto1.jpg","foto2.jpg","foto3.jpg","foto4.jpg","foto5.jpg"];

  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");
  const btnArea = document.getElementById("btnArea");

  function moveNoButton(){
    const areaRect = btnArea.getBoundingClientRect();
    const btnRect = noBtn.getBoundingClientRect();
    const padding = 6;
    const maxX = areaRect.width - btnRect.width - padding;
    const maxY = areaRect.height - btnRect.height - padding;
    const x = Math.max(padding, Math.random() * Math.max(1, maxX));
    const y = Math.max(padding, Math.random() * Math.max(1, maxY));
    noBtn.style.position = "absolute";
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
  }
  ["mouseenter","pointerenter","mousemove","touchstart"].forEach(ev=>{
    noBtn.addEventListener(ev, (e)=>{
      moveNoButton(); popHeart();
      e.preventDefault?.();
    }, { passive:false });
  });
  noBtn.addEventListener("click", (e)=>{ moveNoButton(); e.preventDefault(); });

  // Global music
  const bgm = document.getElementById("bgm");
  const musicBtn = document.getElementById("musicBtn");
  let musicOn = false;

  async function startMusic(){
    try{ await bgm.play(); musicOn = true; syncMusicBtn(); }catch(e){}
  }
  function stopMusic(){ bgm.pause(); musicOn = false; syncMusicBtn(); }
  function toggleMusic(){ musicOn ? stopMusic() : startMusic(); }
  function syncMusicBtn(){ if(musicBtn) musicBtn.textContent = musicOn ? "üîä Musik" : "üîá Musik"; }
  musicBtn?.addEventListener("click", toggleMusic);
  window.addEventListener("click", ()=>{ if(!musicOn) startMusic(); }, { once:true });

  // Hearts
  const heartEmojis = ["üíó","üíñ","üíò","üíû","ü´∂","ü•∞"];
  function popHeart(){
    const el = document.createElement("div");
    el.className = "heart";
    el.textContent = heartEmojis[Math.floor(Math.random()*heartEmojis.length)];
    const startX = 10 + Math.random()*80;
    const drift1 = Math.random()*26 - 13;
    const drift2 = drift1 + (Math.random()*26 - 13);
    const scale = 0.9 + Math.random()*1.2;
    const dur = 4.8 + Math.random()*2.0;
    el.style.left = startX + "vw";
    el.style.top = "105vh";
    el.style.setProperty("--x", drift1 + "vw");
    el.style.setProperty("--x2", drift2 + "vw");
    el.style.setProperty("--s", scale);
    el.style.animationDuration = dur + "s";
    document.body.appendChild(el);
    setTimeout(()=>el.remove(), dur*1000 + 200);
  }
  setInterval(popHeart, 1700);

  // Flow 1 -> 2 -> 3
  yesBtn.addEventListener("click", async ()=>{
    await startMusic();
    showLayer(2);
    setTimeout(()=> showLayer(3), 2200);
  });

  // 3 -> 4
  document.getElementById("openBtn").addEventListener("click", ()=>{
    showLayer(4);
    renderDots();
    updateSlide(false);
    startTyping(true);
    syncMusicBtn();
    popHeart(); popHeart();
  });

  // Layer 4 slider
  const slideImg = document.getElementById("slideImg");
  const badge = document.getElementById("badge");
  const dotsWrap = document.getElementById("dots");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  let idx = 0;

  function renderDots(){
    dotsWrap.innerHTML = "";
    photos.forEach((_, i)=>{
      const d = document.createElement("div");
      d.className = "dot" + (i===idx ? " active" : "");
      d.addEventListener("click", ()=>{ idx=i; updateSlide(true); });
      dotsWrap.appendChild(d);
    });
  }
  function updateSlide(withHeart=false){
  // anti cache biar foto selalu muncul
  slideImg.src = photos[idx] + "?v=" + Date.now();

  badge.textContent = `Foto ${idx+1} / ${photos.length}`;
  [...dotsWrap.children].forEach((d,i)=> d.classList.toggle("active", i===idx));
  if(withHeart) popHeart();
  }
  function next(){ idx = (idx+1) % photos.length; updateSlide(true); }
  function prev(){ idx = (idx-1+photos.length) % photos.length; updateSlide(true); }

  nextBtn.addEventListener("click", next);
  prevBtn.addEventListener("click", prev);

  let startX = null;
  slideImg.addEventListener("touchstart", (e)=>{ startX = e.touches[0].clientX; }, {passive:true});
  slideImg.addEventListener("touchend", (e)=>{
    if(startX===null) return;
    const endX = e.changedTouches[0].clientX;
    const dx = endX - startX;
    startX = null;
    if(Math.abs(dx) > 40) (dx < 0) ? next() : prev();
  });

  // Typewriter
  const typedText = document.getElementById("typedText");
  const cursor = document.getElementById("cursor");
  const replayBtn = document.getElementById("replayBtn");
  const speedBtn = document.getElementById("speedBtn");
  const finishBtn = document.getElementById("finishBtn");

  function buildMessage(){
    const today = new Date().toLocaleDateString("id-ID", { day:"2-digit", month:"long", year:"numeric" });
    return `

Happy Valentine yaa sayangkuu üíû‚ú®
Aku bersyukur banget kamu ada di hidup aku ü´∂

Kamu bikin hari-hari aku jadi lebih seruu,
dan bikin aku pengen jadi versi terbaik ü•∫üíó

Kalau kamu capek, aku mau jadi tempat pulang paling tenang.
Pelan-pelan aja ya‚Ä¶ tapi aku serius sama kamu üíñ

I love you (banyaa banyaa) üòöüíûüíò
Nanti aku beliin sapii limaa yaa üêÆüêÆüêÆüêÆüêÆ

‚Äî Dari Hatiku Yang Paling Tulus (Tung Gemoyy)
(${today})`;
  }

  let typingTimer = null;
  let typingIndex = 0;
  let typingSpeed = 16;
  let speedMode = 0;

  function setSpeed(mode){
    speedMode = mode;
    if(mode===0){ typingSpeed = 16; speedBtn.textContent = "Speed: Normal"; }
    if(mode===1){ typingSpeed = 8;  speedBtn.textContent = "Speed: Cepat"; }
    if(mode===2){ typingSpeed = 26; speedBtn.textContent = "Speed: Pelan"; }
  }
  setSpeed(0);

  function stopTyping(){ if(typingTimer) clearTimeout(typingTimer); typingTimer = null; }

  function startTyping(reset=false){
    const text = buildMessage();
    stopTyping();
    if(reset){ typedText.textContent = ""; typingIndex = 0; cursor.style.display="inline-block"; }
    const tick = () => {
      if(typingIndex >= text.length){ typingTimer = null; return; }
      typedText.textContent += text[typingIndex];
      typingIndex++;
      const ch = text[typingIndex-1];
      let extra = 0;
      if(ch === "," || ch === "." || ch === "!" || ch === "?" ) extra = 80;
      if(ch === "\n") extra = 60;
      typingTimer = setTimeout(tick, typingSpeed + extra);
    };
    tick();
  }

  replayBtn.addEventListener("click", ()=> startTyping(true));
  speedBtn.addEventListener("click", ()=>{
    if(speedMode===0) setSpeed(1);
    else if(speedMode===1) setSpeed(2);
    else setSpeed(0);
  });
  finishBtn.addEventListener("click", ()=>{
    stopTyping();
    typedText.textContent = buildMessage();
    cursor.style.display = "inline-block";
    popHeart(); popHeart();
  });

  // Nav
  document.getElementById("toSongsBtn").addEventListener("click", ()=> showLayer(5));
  document.getElementById("songsBack").addEventListener("click", ()=> showLayer(4));
  document.getElementById("toWhyBtn").addEventListener("click", ()=> showLayer(6));
  document.getElementById("whyBack").addEventListener("click", ()=> showLayer(5));
  document.getElementById("toEndBtn").addEventListener("click", ()=> showLayer(7));

  // Layer 7 date + see again
  const endDate = document.getElementById("endDate");
  const now = new Date();
  endDate.textContent = now.toLocaleDateString("en-US", { weekday:"long", year:"numeric", month:"long", day:"numeric" });

  document.getElementById("seeAgainBtn").addEventListener("click", ()=>{
    showLayer(1);
  });

  // Songs
  const song1 = document.getElementById("song1");
  const song2 = document.getElementById("song2");
  function stopSongs(){
    song1.pause(); song2.pause();
    song1.currentTime = 0; song2.currentTime = 0;
  }
  document.getElementById("song1Play").addEventListener("click", ()=>{
    stopSongs(); song1.play().catch(()=>{});
  });
  document.getElementById("song1Stop").addEventListener("click", ()=>{
    song1.pause(); song1.currentTime = 0;
  });
  document.getElementById("song2Play").addEventListener("click", ()=>{
    stopSongs(); song2.play().catch(()=>{});
  });
  document.getElementById("song2Stop").addEventListener("click", ()=>{
    song2.pause(); song2.currentTime = 0;
  });

  // pop cards
  document.querySelectorAll("[data-pop]").forEach(card=>{
    card.addEventListener("click", ()=>{
      card.classList.remove("pop");
      void card.offsetWidth;
      card.classList.add("pop");
      popHeart();
    });
  });
</script>
</body>
</html>



